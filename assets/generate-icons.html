<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>iPhoneç”¨ã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆãƒ„ãƒ¼ãƒ«</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      max-width: 700px;
      padding: 40px;
      text-align: center;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 1.8em;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 0.95em;
    }

    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 20px;
      margin: 30px 0;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 10px;
    }

    .preview-item {
      text-align: center;
    }

    .preview-item canvas {
      width: 100px;
      height: 100px;
      border-radius: 12px;
      border: 2px solid #ddd;
      margin-bottom: 10px;
    }

    .preview-item label {
      font-size: 0.8em;
      color: #666;
      display: block;
    }

    .button-group {
      display: flex;
      gap: 15px;
      margin-top: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      font-weight: 600;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196F3;
      padding: 15px;
      margin-top: 30px;
      text-align: left;
      border-radius: 5px;
    }

    .info-box h3 {
      color: #1976D2;
      margin-bottom: 10px;
      font-size: 0.95em;
    }

    .info-box ul {
      color: #555;
      font-size: 0.9em;
      line-height: 1.6;
      margin-left: 20px;
    }

    .status {
      margin-top: 20px;
      padding: 10px;
      border-radius: 5px;
      font-weight: 600;
      display: none;
    }

    .status.success {
      background: #c8e6c9;
      color: #2e7d32;
      display: block;
    }

    .status.info {
      background: #bbdefb;
      color: #1565c0;
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“± iPhoneç”¨ã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆ</h1>
    <p class="subtitle">ãƒ­ãƒ¼ãƒ³è¨ˆç®—ã‚¢ãƒ—ãƒªç”¨ã®ãƒ›ãƒ¼ãƒ ç”»é¢ã‚¢ã‚¤ã‚³ãƒ³</p>

    <div class="preview-grid" id="previewGrid"></div>

    <div class="button-group">
      <button onclick="generateAllIcons()">ã™ã¹ã¦ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆ</button>
      <button onclick="generateAndDownload('180')">180Ã—180ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
    </div>

    <div id="status" class="status"></div>

    <div class="info-box">
      <h3>ğŸ“ ä½¿ã„æ–¹</h3>
      <ul>
        <li>ã€Œã™ã¹ã¦ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
        <li>å„ã‚µã‚¤ã‚ºã®ã‚¢ã‚¤ã‚³ãƒ³ãŒè‡ªå‹•çš„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™</li>
        <li>ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ <code>assets/</code> ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã—ã¦ãã ã•ã„</li>
        <li>ãƒ•ã‚¡ã‚¤ãƒ«åä¾‹: <code>icon-180.png</code>, <code>icon-152.png</code> ãªã©</li>
        <li>å®Œäº†å¾Œã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„</li>
      </ul>
    </div>

    <div class="info-box" style="border-color: #ff9800; background: #fff3e0;">
      <h3 style="color: #e65100;">âš ï¸ é‡è¦</h3>
      <ul>
        <li>iOS 15.1ä»¥é™ã§ã¯ <code>icon-180.png</code> ãŒä½¿ç”¨ã•ã‚Œã¾ã™</li>
        <li>iPad Pro 12.9ã§ã¯ <code>icon-167.png</code> ã¾ãŸã¯ <code>icon-180.png</code> ãŒä½¿ç”¨ã•ã‚Œã¾ã™</li>
        <li>ã™ã¹ã¦ã®ã‚µã‚¤ã‚ºã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™</li>
      </ul>
    </div>
  </div>

  <script>
    const sizes = [
      { size: 192, name: 'icon-192.png' },
      { size: 152, name: 'icon-152.png' },
      { size: 167, name: 'icon-167.png' },
      { size: 180, name: 'icon-180.png' }
    ];

    function createIconFromSVG(size) {
      return new Promise((resolve) => {
        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');

        const img = new Image();
        img.onload = function() {
          // èƒŒæ™¯è‰²ï¼ˆç™½ï¼‰
          ctx.fillStyle = '#ffffff';
          ctx.fillRect(0, 0, size, size);

          // SVGã‚’æç”»
          ctx.drawImage(img, 0, 0, size, size);

          resolve(canvas);
        };
        img.src = 'icon.svg';
      });
    }

    async function initPreview() {
      const grid = document.getElementById('previewGrid');
      grid.innerHTML = '';

      for (const { size, name } of sizes) {
        const canvas = await createIconFromSVG(100);
        const item = document.createElement('div');
        item.className = 'preview-item';
        item.appendChild(canvas);

        const label = document.createElement('label');
        label.textContent = `${size}Ã—${size}px`;
        item.appendChild(label);

        grid.appendChild(item);
      }
    }

    async function generateAllIcons() {
      const statusDiv = document.getElementById('status');
      statusDiv.className = 'status info';
      statusDiv.textContent = 'ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆä¸­...';

      for (const { size, name } of sizes) {
        await new Promise((resolve) => {
          setTimeout(async () => {
            const canvas = await createIconFromSVG(size);
            canvas.toBlob(function(blob) {
              const url = URL.createObjectURL(blob);
              const link = document.createElement('a');
              link.href = url;
              link.download = name;
              document.body.appendChild(link);
              link.click();
              document.body.removeChild(link);
              URL.revokeObjectURL(url);
              resolve();
            });
          }, 500);
        });
      }

      statusDiv.className = 'status success';
      statusDiv.textContent = 'âœ“ ã™ã¹ã¦ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼assets ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã—ã¦ãã ã•ã„ã€‚';
    }

    async function generateAndDownload(sizeStr) {
      const statusDiv = document.getElementById('status');
      const sizeObj = sizes.find(s => s.size.toString() === sizeStr);

      statusDiv.className = 'status info';
      statusDiv.textContent = `${sizeObj.size}Ã—${sizeObj.size} ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆä¸­...`;

      const canvas = await createIconFromSVG(sizeObj.size);
      canvas.toBlob(function(blob) {
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = sizeObj.name;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);

        statusDiv.className = 'status success';
        statusDiv.textContent = `âœ“ ${sizeObj.name} ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼`;
      });
    }

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’åˆæœŸåŒ–
    initPreview();
  </script>
</body>
</html>
