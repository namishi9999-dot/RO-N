<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚¢ã‚¤ã‚³ãƒ³è‡ªå‹•ç”Ÿæˆ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 40px 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      margin: 0;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    h1 {
      color: #333;
      margin-bottom: 20px;
    }
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .message {
      margin: 20px 0;
      font-size: 1.1em;
      color: #666;
    }
    .success {
      color: #27ae60;
      font-weight: bold;
    }
    .error {
      color: #e74c3c;
      font-weight: bold;
    }
    .file-list {
      text-align: left;
      margin-top: 20px;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 0.9em;
    }
    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      margin-top: 20px;
    }
    button:hover {
      opacity: 0.9;
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“± ãƒ­ãƒ¼ãƒ³è¨ˆç®—ã‚¢ãƒ—ãƒª ã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆ</h1>
    <p class="message">ãƒšãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„ã€‚ã‚¢ã‚¤ã‚³ãƒ³ãŒè‡ªå‹•çš„ã«ç”Ÿæˆãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚</p>
    <div class="spinner" id="spinner"></div>
    <p id="status" class="message">æº–å‚™ä¸­...</p>
    <div class="file-list" id="files"></div>
    <button onclick="location.reload()">ã‚„ã‚Šç›´ã™</button>
  </div>

  <script>
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•å®Ÿè¡Œ
    window.addEventListener('load', async () => {
      try {
        await generateAllIcons();
      } catch (e) {
        document.getElementById('status').className = 'message error';
        document.getElementById('status').textContent = 'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + e.message;
        document.getElementById('spinner').style.display = 'none';
      }
    });

    async function generateAllIcons() {
      const sizes = [180, 152, 167, 192];
      const files = [];

      document.getElementById('status').textContent = 'ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”Ÿæˆä¸­...';

      for (let i = 0; i < sizes.length; i++) {
        const size = sizes[i];
        await new Promise((resolve) => {
          setTimeout(async () => {
            try {
              const canvas = await createIcon(size);
              canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `icon-${size}.png`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);

                files.push(`âœ“ icon-${size}.png`);
                updateStatus(files, i + 1, sizes.length);
                resolve();
              }, 'image/png');
            } catch (e) {
              console.error(`ã‚µã‚¤ã‚º ${size} ã®ç”Ÿæˆã«å¤±æ•—:`, e);
              files.push(`âœ— icon-${size}.png (ã‚¨ãƒ©ãƒ¼)`);
              updateStatus(files, i + 1, sizes.length);
              resolve();
            }
          }, 500 * i);
        });
      }

      document.getElementById('spinner').style.display = 'none';
      document.getElementById('status').className = 'message success';
      document.getElementById('status').textContent = 'âœ“ ã™ã¹ã¦ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼assets ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã—ã¦ãã ã•ã„ã€‚';
    }

    function updateStatus(files, current, total) {
      document.getElementById('files').innerHTML = files.map(f => `<div>${f}</div>`).join('');
      const percent = Math.round((current / total) * 100);
      document.getElementById('status').textContent = `ç”Ÿæˆä¸­... ${percent}%`;
    }

    async function createIcon(size) {
      return new Promise((resolve) => {
        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');

        // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯
        const gradient = ctx.createLinearGradient(0, 0, size, size);
        gradient.addColorStop(0, '#667eea');
        gradient.addColorStop(1, '#764ba2');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, size, size);

        // å††ãƒãƒ¼ã‚¯èƒŒæ™¯
        const centerX = size * 0.5;
        const centerY = size * 0.35;
        const circleRadius = size * 0.18;

        ctx.fillStyle = 'rgba(255, 255, 255, 0.15)';
        ctx.beginPath();
        ctx.arc(centerX, centerY, circleRadius, 0, Math.PI * 2);
        ctx.fill();

        ctx.strokeStyle = 'white';
        ctx.lineWidth = size * 0.025;
        ctx.beginPath();
        ctx.arc(centerX, centerY, circleRadius, 0, Math.PI * 2);
        ctx.stroke();

        // å††ãƒãƒ¼ã‚¯ï¼ˆÂ¥ï¼‰
        ctx.fillStyle = 'white';
        ctx.font = `bold ${size * 0.25}px Arial`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText('Â¥', centerX, centerY);

        // ã‚°ãƒ©ãƒ•éƒ¨åˆ†
        const graphStartY = size * 0.65;
        const graphWidth = size * 0.6;
        const graphHeight = size * 0.2;
        const barWidth = graphWidth / 7;

        const graphX = centerX - graphWidth / 2;

        // ã‚°ãƒ©ãƒ•èƒŒæ™¯
        ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
        ctx.beginPath();
        ctx.moveTo(graphX, graphStartY);
        ctx.lineTo(graphX + graphWidth, graphStartY);
        ctx.lineTo(graphX + graphWidth, graphStartY + graphHeight);
        ctx.lineTo(graphX, graphStartY + graphHeight);
        ctx.closePath();
        ctx.fill();

        // ã‚°ãƒ©ãƒ•ã®æ£’
        const barHeights = [0.6, 0.9, 1.0, 0.8, 0.7, 0.5, 0.4];
        for (let i = 0; i < barHeights.length; i++) {
          const barX = graphX + i * barWidth + barWidth * 0.15;
          const barHeight = graphHeight * barHeights[i];
          const barY = graphStartY + graphHeight - barHeight;

          ctx.fillStyle = `rgba(255, 255, 255, ${0.3 + barHeights[i] * 0.4})`;
          ctx.fillRect(barX, barY, barWidth * 0.7, barHeight);
        }

        resolve(canvas);
      });
    }
  </script>
</body>
</html>
